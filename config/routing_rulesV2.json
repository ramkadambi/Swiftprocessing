{
    "bank_context": {
      "bank_name": "Wells Fargo Bank NA",
      "bank_bic": "WFBIUS6SXXX",
      "country": "US"
    },
  
    "external_services": {
      "bic_directory": "BankersAlmanacOrEquivalent",
      "payment_ecosystem_api": "WellsPaymentEcosystem"
    },
  
    "rules": [
      {
        "rule_id": "WF-MT103-R1-INTERNAL-CREDIT",
        "priority": 1,
        "description": "If credit financial agent is Wells Fargo, credit customer internally (IBT)",
  
        "conditions": {
          "mt103.credit_agent_bic": "WFBIUS6SXXX"
        },
  
        "actions": {
          "routing_type": "IBT",
          "selected_network": "INTERNAL",
          "next_hop": "NONE"
        }
      },
  
      {
        "rule_id": "WF-MT103-R2-US-INTERMEDIARY-LOOKUP",
        "priority": 2,
        "description": "Wells is intermediary; lookup next US bank clearing capabilities (FED/CHIPS)",
  
        "conditions": {
          "mt103.intermediary_bic": "WFBIUS6SXXX",
          "ultimate_creditor_country": "US"
        },
  
        "actions": {
          "invoke_services": [
            "BIC_TO_ABA_LOOKUP",
            "BIC_TO_CHIPS_LOOKUP"
          ]
        }
      },
  
      {
        "rule_id": "WF-MT103-R3-CHIPS-DEFAULT",
        "priority": 3,
        "description": "Route via CHIPS when CHIPS ID is available (default, cheaper option)",
  
        "conditions": {
          "next_bank.chips_id_exists": true
        },
  
        "actions": {
          "routing_type": "INTERMEDIARY",
          "selected_network": "CHIPS",
          "message_type": "MT103_COVER"
        }
      },
  
      {
        "rule_id": "WF-MT103-R4-FED-ONLY",
        "priority": 4,
        "description": "Route via FED when only ABA is available",
  
        "conditions": {
          "next_bank.chips_id_exists": false,
          "next_bank.aba_exists": true
        },
  
        "actions": {
          "routing_type": "INTERMEDIARY",
          "selected_network": "FED",
          "message_type": "MT103_COVER"
        }
      },
  
      {
        "rule_id": "WF-MT103-R5-CHIPS-OR-FED-OPTIMIZATION",
        "priority": 5,
        "description": "When both CHIPS and FED are available, apply Wells operational optimization",
  
        "conditions": {
          "next_bank.chips_id_exists": true,
          "next_bank.aba_exists": true
        },
  
        "decision_matrix": {
          "if": [
            {
              "condition": "payment_ecosystem.chips_cutoff_passed == true",
              "route": "FED"
            },
            {
              "condition": "payment_ecosystem.chips_queue_depth == HIGH",
              "route": "FED"
            },
            {
              "condition": "customer_preference == FED",
              "route": "FED"
            },
            {
              "condition": "payment_urgency == HIGH",
              "route": "FED"
            }
          ],
          "else": {
            "route": "CHIPS"
          }
        },
  
        "actions": {
          "routing_type": "INTERMEDIARY",
          "message_type": "MT103_COVER"
        }
      },
  
      {
        "rule_id": "WF-MT103-R6-CROSSBORDER-OUT-SWIFT",
        "priority": 10,
        "description": "If ultimate creditor is outside US, forward payment via SWIFT",
  
        "conditions": {
          "ultimate_creditor_country_not": "US"
        },
  
        "actions": {
          "routing_type": "INTERMEDIARY",
          "selected_network": "SWIFT",
          "message_type": "MT103"
        }
      }
    ]
  }
  